(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[32],{"+UO9":function(e,t,r){"use strict";r.r(t);r("pNMO"),r("4Brf"),r("0oug"),r("ma9I"),r("4mDm"),r("NBAS"),r("07d7"),r("PKPk"),r("3bBZ");var n=r("q1tI"),o=r.n(n),a=r("/MKj"),s=r("17x9"),i=r.n(s),u=r("d2gv"),l=r.n(u),c=r("s0Ty"),p=r.n(c),d=r("Ts+D"),f=r("IkD9"),h=r.n(f),m=r("77UF"),b=function(){return function(e){return h.a.track("Add Course Clicked").then((function(){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SUCCESS",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:d.TRACK_COURSE_ADD_LINK_CLICKED,status:e,error:t}}())})).catch(m.h)}},y=(r("2B1R"),r("sMBO"),r("rB9j"),r("hByQ"),r("f61u")),g=r.n(y),S=r("vDqi"),O=r.n(S),v=r("ePoX"),_=r.n(v),E=r("Elhd"),w=r.n(E),C=r("PMJz"),j=r("N4+1"),R=function(e){return{type:_.a.SET_ADDED_COURSE,addedCourse:e}},k=function(){return{type:_.a.ADDING}},N=function(e){return function(t){t(k());var r={course_code:e.courseCode,course_name:e.courseName,study_id:e.studyId,study_name:e.studyName,institution_id:e.institutionId};O.a.post(w.a.route("APIcourseAddNew"),r).then((function(e){e.data&&(e.data.data.course.status===_.a.NEW_COURSE_ADDED&&t(Object(j.a)(l.a.get("addcourse_thanks"))),t(R(e.data.data.course.result)))})).catch((function(){t(Object(C.a)(l.a.get("error")))}))}},P=function(e,t){return function(r){var n={"University ID":e.id,"University Name":e.name,"University Country ID":e.country.id,"University Country Name":e.country.name,"Added Course Name":t.courseName,"Added Course Code":t.courseCode};return h.a.track("Course Added",n).then((function(){return r(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SUCCESS",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:d.TRACK_COURSE_ADDED,status:e,error:t}}())})).catch(m.h)}},T=function(e){return function(t){var r={"Elasticsearch Score":e};h.a.track("Course Suggestion Clicked",r).then((function(){return t({type:d.TRACK_COURSE_SUGGESTION_CLICKED})})).catch(m.h)}},I=(r("EnZy"),r("hiU4")),D=r("r71f"),B=function(){return{type:D.a.SEARCHING}},A=r("Vg6d"),x=function(e,t,r,n,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;return function(s,i){var u=i(),l={type:"course",locale:u.meta.currentLanguage&&u.meta.currentLanguage.split("-")[0]||"",institutionId:t,courseCode:r,courseName:n,studies:o,size:a};return s(B()),Object(I.a)(u.search,l).then((function(a){var i=a.data.hits.hits;s(Object(A.a)(e,{institutionId:t,courseCode:r,courseName:n,studies:o},i))}))}},q=(r("fbCW"),r("B6y2"),r("SYor"),r("Im2c")),M=r("Rs7A"),U=r("Yw+G"),H=r("pJVQ"),V=r("e+O+"),K=r("2iE4"),L=r("S3e9"),F=r("dq6K"),W=(r("yXV3"),r("zKZe"),r("tkto"),r("d/v1")),G=r("TSYQ"),z=r.n(G),Q=r("BXQg"),X=r("Rj/V");function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function J(){return J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J.apply(this,arguments)}function $(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function re(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?oe(e):t}function ne(e){return ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ne(e)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e,t){return ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ae(e,t)}function se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ie=function(e){function t(){var e,r;ee(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=re(this,(e=ne(t)).call.apply(e,[this].concat(a))),se(oe(r),"shouldShowExtraResult",(function(e){return e&&e.length>=3})),se(oe(r),"extraResultTransformer",(function(e){return l.a.get("use_new_study",{newStudy:e})})),se(oe(r),"renderComponent",(function(e){var t=e.input,n=t.onChange,a=t.value,s=void 0===a?{}:a,i=e.label,u=e.meta,l=u.touched,c=u.error,p=u.warning,d=u.active,f=e.id,h=void 0===f?null:f,m=e.placeholder,b=void 0===m?null:m,y=e.hideErrors,g=void 0!==y&&y,S=e.hideWarnings,O=void 0!==S&&S,v=e.inputtedValue,_=void 0===v?"":v,E=e.resultsClassName,w=$(e,["input","label","meta","id","placeholder","hideErrors","hideWarnings","inputtedValue","resultsClassName"]),C=h||"search-".concat(r.props.name),j=!g&&l&&c,R=!O&&l&&p&&!c&&!d;return o.a.createElement("div",{className:z()("form-group",{"has-error":l&&c,"has-warning":R}),"data-test-selector":"study-input-wrapper"},i&&o.a.createElement("label",{htmlFor:C},i),o.a.createElement(Q.a,{layout:"small",formControlStyle:!0,style:{zIndex:20}},o.a.createElement(X.a,J({id:C,initialValue:s.name,resultsClassName:z()("search-input-dropdown",E),wrapperClassName:"searchBar__results clearfix",type:"study",placeholder:b,className:"tt-menu__wrapper",onSelect:n,hideNoResultsText:r.shouldShowExtraResult(_),extraResultValue:r.extraResultTransformer(_),onTypedValueSubmitted:function(){return n({name:_,id:null})},inputTestSelector:"study-input"},w))),j&&o.a.createElement("div",{className:"form-error-stu"},c),R&&o.a.createElement("div",{className:"form-warning-stu"},p))})),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(t,e),r=t,n=[{key:"render",value:function(){return o.a.createElement(W.a,J({component:this.renderComponent},this.props))}}],n&&te(r.prototype,n),a&&te(r,a),t}(n.Component);se(ie,"propTypes",{name:i.a.string.isRequired,id:i.a.string,label:i.a.string,hideErrors:i.a.bool,hideWarnings:i.a.bool,transformer:i.a.func,inputtedValue:i.a.string,resultsClassName:i.a.string}),se(ie,"defaultProps",{transformer:function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{id:parseInt(e.id)})}});var ue=Object(a.connect)((function(e){return{isApp:e.meta.isApp}}))(ie);function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function pe(){return pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pe.apply(this,arguments)}function de(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function me(e,t){return!t||"object"!==ce(t)&&"function"!=typeof t?ye(e):t}function be(e){return be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},be(e)}function ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ge(e,t){return ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ge(e,t)}function Se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Oe=function(e){function t(){var e,r;fe(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=me(this,(e=be(t)).call.apply(e,[this].concat(a))),Se(ye(r),"handleChange",(function(e,t){var n=r.props.transformer(e);return r.props.onChange&&r.props.onChange(n),t(n)})),Se(ye(r),"renderComponent",(function(e){var t=e.input,n=t.onChange,a=t.value,s=void 0===a?{}:a,i=e.label,u=e.meta,l=u.touched,c=u.error,p=u.warning,d=u.active,f=e.id,h=void 0===f?null:f,m=e.placeholder,b=void 0===m?null:m,y=e.hideErrors,g=void 0!==y&&y,S=e.hideWarnings,O=void 0!==S&&S,v=e.resultsClassName,_=de(e,["input","label","meta","id","placeholder","hideErrors","hideWarnings","resultsClassName"]),E=h||"search-".concat(r.props.name),w=!g&&l&&c,C=!O&&l&&p&&!c&&!d;return o.a.createElement("div",{className:z()("form-group",{"has-error":l&&c,"has-warning":C})},i&&o.a.createElement("label",{htmlFor:E},i),o.a.createElement(Q.a,{layout:"small",formControlStyle:!0,style:{zIndex:21}},o.a.createElement(X.a,pe({id:E,initialValue:s.name,resultsClassName:z()("search-input-dropdown",v),wrapperClassName:"searchBar__results clearfix",type:"institution",placeholder:b,className:"tt-menu__wrapper",onSelect:function(e){return r.handleChange(e,n)},inputTestSelector:E},_))),w&&o.a.createElement("div",{className:"form-error-stu"},c),C&&o.a.createElement("div",{className:"form-warning-stu"},p))})),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(t,e),r=t,n=[{key:"render",value:function(){return o.a.createElement(W.a,pe({component:this.renderComponent},this.props))}}],n&&he(r.prototype,n),a&&he(r,a),t}(n.Component);Se(Oe,"propTypes",{name:i.a.string.isRequired,id:i.a.string,label:i.a.string,onChange:i.a.func,hideErrors:i.a.bool,hideWarnings:i.a.bool,transformer:i.a.func,resultsClassName:i.a.string}),Se(Oe,"defaultProps",{transformer:function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){Se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{id:parseInt(e.id)})}});var ve=Object(a.connect)((function(e){return{isApp:e.meta.isApp}}))(Oe);function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function je(e,t){return!t||"object"!==Ee(t)&&"function"!=typeof t?ke(e):t}function Re(e){return Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Re(e)}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ne(e,t){return Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ne(e,t)}function Pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Te="CourseDetailsForm",Ie=function(e){function t(){var e,r;we(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=je(this,(e=Re(t)).call.apply(e,[this].concat(o))),Pe(ke(r),"state",{showSubmitWarning:!1,submitSucceeded:!1}),Pe(ke(r),"handleFormSubmit",(function(e){var t=e.courseName,n=void 0===t?"":t,o=e.courseCode,a=void 0===o?"":o,s=e.study;s=void 0===s?{}:s;var i=s.name,u=s.id,l=e.institution;l=void 0===l?{}:l;var c=l.id;return r.props.hasWarnings&&!r.state.showSubmitWarning?r.setState({showSubmitWarning:!0}):r.props.onSubmit(c,a.trim(),n.trim(),u,i,r.props.inputtedStudy).then((function(){return r.setState({submitSucceeded:!0})})).catch((function(e){throw e}))})),Pe(ke(r),"handleInstitutionChange",(function(e){var t=e.id,n=void 0===t?null:t;r.props.change("study",{}),r.props.fetchInstitution(n)})),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ne(e,t)}(t,e),r=t,n=[{key:"componentWillReceiveProps",value:function(e){!this.state.showSubmitWarning||e.hasWarnings&&!e.hasErrors||this.setState({showSubmitWarning:!1})}},{key:"render",value:function(){var e=!this.props.hasErrors&&this.props.hasWarnings&&this.state.showSubmitWarning;return o.a.createElement("form",{onSubmit:this.props.handleSubmit(this.handleFormSubmit),"data-test-selector":"course-details-form"},o.a.createElement(g.a.Body,null,this.props.warnings&&o.a.createElement(K.a,{type:"warning"},l.a.get("error")),o.a.createElement(ve,{name:"institution",label:l.a.get("institution"),placeholder:l.a.get("institution"),onChange:this.handleInstitutionChange}),this.props.hasStudy&&o.a.createElement(ue,{name:"study",label:l.a.get("study"),placeholder:l.a.get("search_study_placeholder"),resultsClassName:"add-course-modal","data-hj-whitelist":!0,inputtedValue:this.props.inputtedStudy,institutionId:this.props.institution.id}),o.a.createElement(F.a,{name:"courseName",type:"text",maxLength:250,label:l.a.get("course_name"),placeholder:l.a.get("course_name_placeholder"),"data-test-selector":"course-name-input","data-hj-whitelist":!0}),this.props.hasCourseCode&&o.a.createElement(F.a,{name:"courseCode",type:"text",maxLength:20,label:l.a.get("course_code"),placeholder:l.a.get("course_code_placeholder"),"data-test-selector":"course-code-input","data-hj-whitelist":!0})),o.a.createElement(g.a.Footer,null,e?o.a.createElement(K.a,{type:"warning",className:"add-course-modal__footer-message"},o.a.createElement("span",null,l.a.get("add_course_warnings")),o.a.createElement(K.e,{type:"submit",className:"alert-stu__button","data-test-selector":"confirm-course-details-button",loading:this.props.submitting||this.state.submitSucceeded,disabled:this.props.submitting||this.state.submitSucceeded},l.a.get("addcourse_confirm"))):o.a.createElement(K.e,{type:"submit","data-test-selector":"confirm-course-details-button",loading:this.props.submitting||this.state.submitSucceeded,disabled:this.props.submitting||this.state.submitSucceeded},l.a.get("addcourse"))))}}],n&&Ce(r.prototype,n),a&&Ce(r,a),t}(n.Component);Pe(Ie,"propTypes",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){Pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({institution:i.a.object,onSubmit:i.a.func.isRequired,submitting:i.a.bool,initialValues:i.a.shape({institution:i.a.shape({id:i.a.oneOf([i.a.number,i.a.string]),name:i.a.string}),study:i.a.shape({id:i.a.oneOf([i.a.number,i.a.string]),name:i.a.string}),courseCode:i.a.string,courseName:i.a.string}),inputtedStudy:i.a.string,hasCourseCode:i.a.bool.isRequired,hasCourseCodeRequired:i.a.bool.isRequired,hasStudy:i.a.bool.isRequired,hasStudyRequired:i.a.bool.isRequired,hasWarnings:i.a.bool,hasErrors:i.a.bool},U.a));var De=Object(a.connect)((function(e){var t,r=e.institution.current,n=(t=e.search.queries,t&&t["search-study"]?t["search-study"].trim():null),o=Boolean(Object.values(Object(q.a)(Te)(e)).find(Boolean)),a=Boolean(Object.values(Object(M.a)(Te)(e)).find(Boolean));return{institution:r,inputtedStudy:n,hasCourseCode:Boolean(r&&r.has_course_code>0),hasCourseCodeRequired:Boolean(r&&1===r.has_course_code),hasStudy:Boolean(r&&r.has_study>0),hasStudyRequired:Boolean(r&&1===r.has_study),hasWarnings:o,hasErrors:a}}),(function(e){return{fetchInstitution:function(t){return t&&e(Object(V.a)(t))}}}))(Object(H.a)({form:Te,validate:function(e,t){var r=e.courseName,n=void 0===r?"":r,o=e.courseCode,a=void 0===o?"":o,s=e.study,i=void 0===s?{}:s,u=t.hasCourseCodeRequired,l=t.hasStudyRequired;return{courseName:Object(L.l)(n,"course_name"),courseCode:Object(L.b)({courseCode:a,courseName:n},{hasCourseCodeRequired:u,trim:20}),study:l?Object(L.l)(i.name||"","study"):null}},warn:function(e,t){var r=e.courseCode,n=void 0===r?"":r,o=e.courseName,a=void 0===o?"":o,s=t.hasCourseCode;return{courseName:Object(L.q)({courseName:a}),courseCode:Object(L.p)({courseCode:n,courseName:a},{hasCourseCode:s})}}})(Ie)),Be=r("QF9i"),Ae=r("IP2g");function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ue(e,t){return!t||"object"!==xe(t)&&"function"!=typeof t?Ve(e):t}function He(e){return He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},He(e)}function Ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e,t){return Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ke(e,t)}function Le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Fe=function(e){function t(){var e,r;qe(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=Ue(this,(e=He(t)).call.apply(e,[this].concat(o))),Le(Ve(r),"state",t.INITIAL_STATE),Le(Ve(r),"handleSubmitCourseDetails",(function(e,n,o,a,s,i){return r.setState({courseDetails:{institutionId:e,courseCode:n,courseName:o,studyId:a,studyName:s||i}}),r.props.dispatch(x(t.SEARCH_SIMILAR_COURSES_KEY,e,n,o,s?[s]:[]))})),Le(Ve(r),"handleAddCourse",(function(){return r.props.dispatch(N(r.state.courseDetails))})),Le(Ve(r),"handlePickSimilarCourse",(function(e){return r.props.dispatch(T(e.elasticMeta.score)),r.props.onCourseAdded(e)})),Le(Ve(r),"handleShowCourseDetailsForm",(function(){r.setState({step:t.STEPS.COURSE_DETAILS})})),r}var r,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(t,e),r=t,a=[{key:"componentDidUpdate",value:function(e){!e.show&&this.props.show&&this.setState(t.INITIAL_STATE),e.searchStatus===D.a.SEARCHING&&this.props.searchStatus===D.a.SEARCH_DONE&&(this.props.searchCourseResults.length?this.setState({step:t.STEPS.PICK_EXISTING_COURSE_OR_ADD_NEW}):this.props.dispatch(N(this.state.courseDetails))),e.addCourseStatus===_.a.ADDING&&this.props.addCourseStatus===_.a.ADDED&&(this.props.onCourseAdded(this.props.addedCourse),this.props.dispatch(P(this.props.institution,this.state.courseDetails)))}},{key:"render",value:function(){var e,r=this;switch(this.state.step){case t.STEPS.COURSE_DETAILS:e=o.a.createElement(De,{onSubmit:this.handleSubmitCourseDetails,submitting:this.props.searchStatus===D.a.SEARCHING||this.props.addCourseStatus===_.a.ADDING,initialValues:{institution:this.props.institution&&{id:this.props.institution.id,name:this.props.institution.name}}});break;case t.STEPS.PICK_EXISTING_COURSE_OR_ADD_NEW:var a=this.props.searchCourseResults.map((function(e,t){var n;return e.codes&&e.codes.length&&(n=o.a.createElement("span",{className:"similar-course__code"},e.codes[0])),o.a.createElement("li",{key:t,className:"similar-course",onClick:function(){return r.handlePickSimilarCourse(e)},"data-test-selector":"similar-course-".concat(t+1)},o.a.createElement(Be.a,{size:"small"}),o.a.createElement("span",{className:"similar-course__name"},e.name),n,o.a.createElement(Ae.a,{icon:"chevron-right",className:"similar-course__picker"}))}));e=o.a.createElement(n.Fragment,null,o.a.createElement(g.a.Body,null,o.a.createElement("p",null,o.a.createElement("span",{dangerouslySetInnerHTML:{__html:l.a.get("adding_course",{courseDetails:'<span class="font-bold">'.concat(this.state.courseDetails.courseName," (").concat(this.state.courseDetails.courseCode,")</span>")})}}),o.a.createElement("br",null),o.a.createElement("span",null,l.a.get("same_course_as_below"))),o.a.createElement("ul",{className:"list-unstyled","data-test-selector":"similar-courses-list"},a),o.a.createElement("p",{dangerouslySetInnerHTML:{__html:l.a.get("select_or_proceed",{buttonCopy:'<span class="font-bold">'.concat(l.a.get("add_new_course"),"</span>")})}})),o.a.createElement(g.a.Footer,null,o.a.createElement(K.d,null,o.a.createElement(K.c,{color:"lighter",onClick:this.handleShowCourseDetailsForm},l.a.get("previous")),o.a.createElement(K.e,{"data-test-selector":"add-new-course-button",disabled:this.props.addCourseStatus===_.a.ADDING,loading:this.props.addCourseStatus===_.a.ADDING,onClick:this.handleAddCourse},l.a.get("add_new_course")))))}return o.a.createElement(g.a,{show:this.props.show,onHide:this.props.onHide,dialogClassName:"add-course-modal"},o.a.createElement(g.a.Header,null,o.a.createElement("div",{className:"modal__title font-big font-bold"},l.a.get("addcourse")),o.a.createElement("button",{className:"modal__cross",onClick:this.props.onHide,type:"button"},o.a.createElement(Ae.a,{icon:"times"}))),e)}}],a&&Me(r.prototype,a),s&&Me(r,s),t}(n.Component);Le(Fe,"STEPS",{COURSE_DETAILS:"COURSE_DETAILS",PICK_EXISTING_COURSE_OR_ADD_NEW:"PICK_EXISTING_COURSE_OR_ADD_NEW"}),Le(Fe,"SEARCH_SIMILAR_COURSES_KEY","similarCourses"),Le(Fe,"INITIAL_STATE",{courseDetails:{},step:Fe.STEPS.COURSE_DETAILS}),Le(Fe,"propTypes",{institution:i.a.object,onCourseAdded:i.a.func,addedCourse:i.a.object,onHide:i.a.func,show:i.a.bool,dispatch:i.a.func.isRequired,searchStatus:i.a.string,searchCourseResults:i.a.array,addCourseStatus:i.a.string});var We=Object(a.connect)((function(e){return{institution:e.institution.current,addedCourse:e.course.addedCourse,searchStatus:e.search.searchStatus,searchCourseResults:e.search.results&&e.search.results[Fe.SEARCH_SIMILAR_COURSES_KEY]||[],addCourseStatus:e.course.addCourseStatus}}))(Fe);function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xe(e,t){return!t||"object"!==Ge(t)&&"function"!=typeof t?Ze(e):t}function Ye(e){return Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ye(e)}function Ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Je(e,t){return Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Je(e,t)}function $e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var et=function(e){function t(){var e,r;ze(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=Xe(this,(e=Ye(t)).call.apply(e,[this].concat(o))),$e(Ze(r),"state",{showModal:!1}),$e(Ze(r),"handleClick",(function(){r.props.dispatch(b()),r.setState({showModal:!0})})),$e(Ze(r),"handleHideModal",(function(){r.setState({showModal:!1})})),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Je(e,t)}(t,e),r=t,n=[{key:"render",value:function(){return o.a.createElement("div",{className:p.a.buttonWrapper},o.a.createElement(We,{show:this.state.showModal,onHide:this.handleHideModal,onCourseAdded:this.props.onSubmitted}),o.a.createElement(K.c,{size:"wide",color:"clear",className:p.a.button,"data-test-selector":"addMissingCourseButton",onClick:this.handleClick,type:"button"},o.a.createElement(Ae.a,{icon:"question-circle"})," ",l.a.get("add_course")))}}],n&&Qe(r.prototype,n),a&&Qe(r,a),t}(n.Component);$e(et,"propTypes",{onSubmitted:i.a.func.isRequired,dispatch:i.a.func.isRequired});t.default=Object(a.connect)()(et)},"Rj/V":function(e,t,r){"use strict";r("pNMO"),r("4Brf"),r("0oug"),r("ma9I"),r("4mDm"),r("sMBO"),r("NBAS"),r("07d7"),r("rB9j"),r("PKPk"),r("hByQ"),r("3bBZ");var n=r("q1tI"),o=r.n(n),a=r("17x9"),s=r.n(a),i=r("/MKj"),u=r("i8i4"),l=r.n(u),c=r("d2gv"),p=r.n(c),d=r("TSYQ"),f=r.n(d),h=r("b6Qr"),m=r("77UF"),b=(r("yq1k"),r("2B1R"),r("zKZe"),r("mRH6"),r("kX0S"));function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g.apply(this,arguments)}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?E(e):t}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=function(e){function t(){var e,r;S(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=v(this,(e=_(t)).call.apply(e,[this].concat(o))),C(E(r),"handleExtraResultClick",(function(e){e.preventDefault(),r.props.onExtraResultClick()})),r}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,e),n=t,a=[{key:"render",value:function(){var e,t,n,a=this;if(this.props.showAddButtons){var s="course"===this.props.type&&["acquisitionUniversityUploader","documentUpload","acquisitionUploader"].includes(this.props.currentRoute),i=this.props.user&&this.props.user.isLoggedIn&&("course"===this.props.type||"book"===this.props.type||"institution"===this.props.type);if(s||i)if("course"===this.props.type){var u=r("+UO9").default;e=o.a.createElement(u,{onSubmitted:this.props.onSelect,institution:this.props.institution})}else if("book"===this.props.type){var l=r("VWwz").default;e=o.a.createElement(l,{courseId:this.props.courseId,onSubmitted:this.props.onSelect})}}if(0===this.props.results.length)this.props.hideNoResultsText||(n=o.a.createElement("div",{className:this.props.wrapperClassName},o.a.createElement("div",{className:"noSearchResults","data-test-selector":"no-search-results"},this.props.noResultsMessage)));else{var c=this.props.liComponent,p=this.props.results.map((function(e,t){return o.a.createElement(c,g({},e,{className:f()({"tt-cursor":a.props.highlightedResultIndex===t}),key:e.id,searchPos:t+1,onSelected:a.props.onSelect,link:a.props.link,type:a.props.type}))}));n=o.a.createElement("ul",{className:this.props.wrapperClassName,"data-test-selector":this.props.dataTestSelector},p)}return this.props.extraResultValue&&this.props.onExtraResultClick&&(t=o.a.createElement("div",{className:"extra-results"},o.a.createElement("button",{className:"extra-results__button","data-test-selector":"extra-search-results",onClick:this.handleExtraResultClick},this.props.extraResultValue))),o.a.createElement("div",{className:this.props.className},n,t,e)}}],a&&O(n.prototype,a),s&&O(n,s),t}(n.Component);C(j,"propTypes",{results:s.a.array.isRequired,institution:s.a.object.isRequired,currentRoute:s.a.string.isRequired,noResultsMessage:s.a.oneOfType([s.a.string,s.a.node]).isRequired,onSelect:s.a.func.isRequired,type:s.a.string.isRequired,liComponent:s.a.func.isRequired,link:s.a.bool.isRequired,user:s.a.object,courseId:s.a.number,showAddButtons:s.a.bool,wrapperClassName:s.a.string,dataTestSelector:s.a.string,className:s.a.string,highlightedResultIndex:s.a.number,hideNoResultsText:s.a.bool,extraResultValue:s.a.string,onExtraResultClick:s.a.func}),C(j,"defaultProps",{user:{isLoggedIn:!1},results:[],showAddButtons:!1});var R=Object(b.connect)((function(e,t){var r=e.search.results[t.id],n=e.institution&&e.institution.current;return n||(n={id:e.search.institutionId,institutionId:e.search.institutionId,institutionName:e.search.institutionName}),{results:r,institution:n,currentRoute:e.meta.currentRoute}}))(j),k=(r("oVuX"),r("YcKG")),N=r.n(k),P=r("KvvS"),T=r("QF9i"),I=r("XYnV");function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?M(e):t}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e,t){return U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},U(e,t)}function H(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var V=function(e){function t(){var e,r;B(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=x(this,(e=q(t)).call.apply(e,[this].concat(o))),H(M(r),"handleSelected",(function(){var e;r.props.authors&&(e=r.props.authors.join(", ")),r.props.onSelected({id:r.props.id,name:r.props.name,value:r.props.name,codes:r.props.codes,author:e})})),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(t,e),r=t,n=[{key:"render",value:function(){var e,t,r;"book"===this.props.type?(e=this.props.authors.join(", "),r=o.a.createElement(P.a,{size:"small",className:"hidden-xs pull-left"})):"course"===this.props.type?(e="",r=o.a.createElement(T.a,{size:"small",className:"hidden-xs pull-left"}),this.props.codes.length>0&&(e=this.props.codes[0]),this.props.study_search_is_visible&&this.props.studies.length>0&&(e=(e.length?"".concat(e," | "):"")+this.props.studies.join(", "))):"institution"===this.props.type&&(r=o.a.createElement(I.a,{size:"small",className:"hidden-xs pull-left"}));var n=o.a.createElement("div",{className:"suggestion-name-wrapper"},o.a.createElement("span",{className:"suggestion-name"},this.props.name),o.a.createElement("span",null,e));return t=this.props.link?o.a.createElement("a",{className:"search-suggestions__links search-suggestions__materialLink",href:N.a[this.props.type](this.props)},o.a.createElement("div",{className:"ic-text ic-text--top"},r,n)):o.a.createElement("div",{className:"search-suggestions__links search-suggestions__materialLink","data-id":this.props.id,onClick:this.handleSelected},o.a.createElement("div",{className:"ic-text ic-text--top"},r,n)),o.a.createElement("li",{className:f()("search-suggestions",this.props.className),"data-test-selector":"search-suggestion"},t)}}],n&&A(r.prototype,n),a&&A(r,a),t}(n.Component);H(V,"propTypes",{id:s.a.oneOfType([s.a.string,s.a.number]).isRequired,name:s.a.string.isRequired,type:s.a.oneOf(["book","course","institution","study"]).isRequired,onSelected:s.a.func.isRequired,link:s.a.bool,className:s.a.string,authors:s.a.array,codes:s.a.array,study_search_is_visible:s.a.bool,studies:s.a.array});var K=V,L=r("NgxB"),F=r("GVZ9"),W=r("0pXI"),G=function(e){return function(t){switch(e){case"institution":e="University";break;case"course":e="Course";break;default:throw new Error("Wrong type")}return t(Object(W.a)("".concat(e," Search Started")))}},z=r("IP2g"),Q=r("2iE4");function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function J(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?ee(e):t}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e,t){return te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},te(e,t)}function re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ne=function(e){function t(){var e,r;Y(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=J(this,(e=$(t)).call.apply(e,[this].concat(o))),re(ee(r),"state",{forceHideDropdown:!0,inputValue:r.props.initialValue,highlightedResultIndex:-1,searchStartedTracked:!1}),re(ee(r),"handleCloseDropdown",(function(e){r.state.forceHideDropdown||l.a.findDOMNode(ee(r)).contains(e.target)||("function"==typeof r.props.onBlur&&r.props.onBlur(),r.setState({forceHideDropdown:!0},r.handleToggleResults))})),re(ee(r),"handleResultSelected",(function(e){var t={forceHideDropdown:!0};e?(r.props.onSelect(e),r.props.clearOnSelected?t.inputValue="":t.inputValue=e.value||e.name||""):"function"==typeof r.props.onTypedValueSubmitted&&r.props.onTypedValueSubmitted(),r.setState(t,r.handleToggleResults),r.props.onBlur()})),re(ee(r),"handleInputFocus",(function(e){r.props.onFocus(e),r.props.query.length>0&&r.setState({forceHideDropdown:!1},r.handleToggleResults)})),re(ee(r),"handleChange",(function(e){r.props.onChange(e),r.shouldTrackSearchStarted(e)&&(r.setState({searchStartedTracked:!0}),r.props.dispatch(G(r.props.type))),r.setState({inputValue:e})})),re(ee(r),"handleSearch",(function(e){r.props.dispatch(Object(F.a)(r.props.id,e,r.props.type,r.props.resultsNumber,r.props.institutionId)),r.setState({forceHideDropdown:0===e.length},r.handleToggleResults)})),re(ee(r),"handleClearInput",(function(){r.props.onClear(),r.setState({inputValue:"",forceHideDropdown:!0},r.handleToggleResults)})),re(ee(r),"handleToggleResults",(function(){"function"==typeof r.props.onToggleResults&&r.props.onToggleResults(r.state.forceHideDropdown)})),re(ee(r),"handleKeyboardNavigation",(function(e){if(!r.areResultsHidden()&&r.props.results.length>0)switch(e.keyCode){case 38:r.state.highlightedResultIndex<=0?r.setState({highlightedResultIndex:r.props.results.length-1}):r.setState((function(e){return{highlightedResultIndex:e.highlightedResultIndex-1}}));break;case 40:r.state.highlightedResultIndex===r.props.results.length-1?r.setState({highlightedResultIndex:0}):r.setState((function(e){return{highlightedResultIndex:e.highlightedResultIndex+1}}));break;case 9:case 13:e.preventDefault();var t=r.props.results[r.state.highlightedResultIndex];r.handleResultSelected(t),r.setState({highlightedResultIndex:-1});break;case 27:r.setState({forceHideDropdown:!0},r.handleToggleResults),r.setState({highlightedResultIndex:-1})}})),re(ee(r),"areResultsHidden",(function(){return r.state.forceHideDropdown||r.props.isSearching&&0===r.props.results.length})),re(ee(r),"shouldTrackSearchStarted",(function(e){return 1===e.length&&r.props.shouldTrackSearchStarted&&!r.state.searchStartedTracked})),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(t,e),r=t,n=[{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.handleCloseDropdown,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.handleCloseDropdown,!1)}},{key:"render",value:function(){var e,t,r,n=this.props.isSearching;return this.props.spinner&&n&&(e=o.a.createElement(Q.l,{size:"small",fixed:"right"})),this.props.clearable&&(t=o.a.createElement(Q.c,{color:"clear",size:"minimum",onClick:this.handleClearInput,className:"dropdown-typeahead__dismiss","data-test-selector":this.props.clearTestSelector},o.a.createElement(z.a,{icon:"times"}))),r=void 0!==this.props.value?this.props.value:this.state.inputValue,o.a.createElement("div",{onKeyDown:this.handleKeyboardNavigation,className:f()("dropdown-typeahead",this.props.className)},o.a.createElement("div",{className:"ElasticTypeaheadInput"},o.a.createElement(L.a,{id:this.props.id,className:this.props.inputClassName,placeholder:this.props.placeholder,value:r,debounceTimeout:h.isMobile?800:400,autofocus:this.props.autofocus,onImmediateChange:this.handleChange,onChange:this.handleSearch,onFocus:this.handleInputFocus,onBlur:this.props.onBlur,disabled:this.props.disabled,dataTestSelector:this.props.inputTestSelector}),e,t),o.a.createElement(R,{id:this.props.id,type:this.props.type,className:f()(this.props.resultsClassName,{hidden:this.areResultsHidden()}),onSelect:this.handleResultSelected,liComponent:this.props.searchComponent,link:!this.props.onSelect,wrapperClassName:this.props.wrapperClassName,user:this.props.user,noResultsMessage:this.props.noResultsMessage||p.a.get("no_results"),showAddButtons:this.props.showAddButtons,courseId:this.props.courseId,dataTestSelector:this.props.resultsTestSelector,ref:this.searchResults,highlightedResultIndex:this.state.highlightedResultIndex,extraResultValue:this.props.extraResultValue,onExtraResultClick:this.props.extraResultValue&&this.handleResultSelected,hideNoResultsText:this.props.hideNoResultsText}))}}],n&&Z(r.prototype,n),a&&Z(r,a),t}(n.Component);re(ne,"propTypes",{id:s.a.string,type:s.a.string,query:s.a.string,initialValue:s.a.string,value:s.a.string,isSearching:s.a.bool,spinner:s.a.bool,resultsNumber:s.a.number,results:s.a.array,searchComponent:s.a.func,clearOnSelected:s.a.bool,noResultsMessage:s.a.oneOfType([s.a.node,s.a.string]),showAddButtons:s.a.bool,resultsTestSelector:s.a.string,resultsClassName:s.a.string,wrapperClassName:s.a.string,clearable:s.a.bool,clearTestSelector:s.a.string,onClear:s.a.func,disabled:s.a.bool,placeholder:s.a.string,autofocus:s.a.bool,inputClassName:s.a.string,inputTestSelector:s.a.string,user:s.a.object,institutionId:s.a.number,courseId:s.a.number,onChange:s.a.func,onToggleResults:s.a.func,onBlur:s.a.func,onFocus:s.a.func,onSelect:s.a.func,className:s.a.string,dispatch:s.a.func,onTypedValueSubmitted:s.a.func,hideNoResultsText:s.a.bool,extraResultValue:s.a.string,shouldTrackSearchStarted:s.a.bool}),re(ne,"defaultProps",{searchComponent:K,initialValue:"",onChange:m.h,onClear:m.h,onToggleResults:m.h,onBlur:m.h,onSelect:m.h,onFocus:m.h,results:[],query:""});t.a=Object(i.connect)((function(e,t){return{isSearching:!0===e.search.isSearching[t.id],query:e.search.queries[t.id],results:e.search.results[t.id]}}))(ne)},VWwz:function(e,t,r){"use strict";r.r(t);r("pNMO"),r("4Brf"),r("0oug"),r("ma9I"),r("4mDm"),r("NBAS"),r("07d7"),r("PKPk"),r("3bBZ");var n=r("q1tI"),o=r.n(n),a=r("d2gv"),s=r.n(a),i=r("17x9"),u=r.n(i),l=r("s0Ty"),c=r.n(l),p=(r("SYor"),r("/MKj")),d=r("f61u"),f=r.n(d),h=(r("TeQF"),r("QWBl"),r("5DmW"),r("27RR"),r("tkto"),r("FZtP"),r("vDqi")),m=r.n(h),b=r("Elhd"),y=r.n(b),g=r("N4+1"),S=r("PMJz"),O=r("ePoX"),v=r.n(O),_=function(){return{type:v.a.ADD_BOOK_SUBMITTING}},E=function(e){return{type:v.a.ADD_BOOK_SUBMITTED,book:e}},w=function(){return{type:v.a.ADD_BOOK_NOT_SUBMITTED}},C=r("BAHx");function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k=function(e){return function(t){t(_());var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{ISBN:Object(C.a)(e.ISBN)});return m.a.post(y.a.route("api.books.store"),r).then((function(e){var r=e.data,n=r.data,o=r.message,a=void 0===o?null:o;t(E({name:n.title,title:n.title,id:n.id,authors:[n.author],author:n.author})),t(Object(g.a)(a||s.a.get("thanks_contribution"),"success"))})).catch((function(e){var r=e.message;t(Object(S.a)(r)),t(w())}))}},N=(r("2B1R"),r("Yw+G")),P=r("pJVQ"),T=r("S3e9"),I=r("KvvS"),D=r("dq6K"),B=r("BXQg"),A=r("uEEt"),x=r("2iE4");function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function V(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?L(e):t}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e,t){return F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},F(e,t)}function W(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var G=function(e){function t(){var e,r;U(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=V(this,(e=K(t)).call.apply(e,[this].concat(o))),W(L(r),"state",{results:null,totalResults:0}),W(L(r),"handleBookSearch",(function(e,t){return m.a.post(y.a.route("APIbookSearchGoogle"),{query:e.book}).then((function(e){var t=e.data.data,n=t.results,o=t.totalResults;return r.setState({results:n,totalResults:o})})).catch((function(){return t(Object(S.a)())}))})),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,e),r=t,n=[{key:"render",value:function(){var e=this,t=this.state,r=t.results,n=t.totalResults,a=null;if(r){var i=null,u=null,l=null;if(r.length){var c=s.a.get("select_book"),p=s.a.get("results_out_of_total",{resultsShowed:r.length,resultsTotal:n});u="".concat(c," (").concat(p,")"),l=r.map((function(t,r){return o.a.createElement("tr",{onClick:function(){return e.props.onResultSelected(t)},style:{cursor:"pointer"},className:"document-list item-show book-tr-add",key:r},o.a.createElement("td",{width:"20"},o.a.createElement(I.a,{size:"small"})),o.a.createElement("td",null,t.title,o.a.createElement("br",null),o.a.createElement("span",{className:"filename"},t.ISBN," - ",t.author)))}))}else i=o.a.createElement("span",null,s.a.get("no_results"));a=o.a.createElement("div",{className:"select-book"},o.a.createElement("h3",null,u),o.a.createElement("table",{className:"table table-hover table-condensed book-list-add"},o.a.createElement("tbody",null,l)),i)}return o.a.createElement("form",{onSubmit:this.props.handleSubmit(this.handleBookSearch)},o.a.createElement("div",{className:"mb1x"},o.a.createElement(B.a,{formControlStyle:!0,layout:"small"},o.a.createElement(D.a,{formGroupClassName:"mb0x",name:"book",type:"text",maxLength:100,placeholder:s.a.get("search_book_placeholder"),hideErrors:!0})),o.a.createElement(A.a,{name:"book_query"})),o.a.createElement(x.e,{size:"wide",type:"submit",loading:this.props.submitting,disabled:this.props.submitting},s.a.get("search_google_button")),a)}}],n&&H(r.prototype,n),a&&H(r,a),t}(n.Component);W(G,"propTypes",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({onResultSelected:u.a.func.isRequired},N.a));var z=Object(P.a)({form:"GoogleBookForm",validate:function(e){return{book:Object(T.l)(e.book,"book")}}})(G);function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Z(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},J(e)}function $(e,t){return $=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$(e,t)}var ee=function(e){function t(){return X(this,t),Z(this,J(t).apply(this,arguments))}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,e),r=t,n=[{key:"render",value:function(){return o.a.createElement("form",{onSubmit:this.props.handleSubmit},o.a.createElement(D.a,{name:"title",maxLength:250,label:s.a.get("title")}),o.a.createElement(D.a,{name:"author",maxLength:250,label:s.a.get("author")}),o.a.createElement(D.a,{name:"ISBN",maxLength:25,label:s.a.get("book_isbn")}))}}],n&&Y(r.prototype,n),a&&Y(r,a),t}(n.Component);ee=Object(P.a)({form:"BookAddForm",validate:function(e){return{title:Object(T.l)(e.title,"title"),author:Object(T.l)(e.author,"author"),ISBN:Object(T.e)(e.ISBN)}}})(ee);var te=ee,re=r("IP2g");function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function se(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?ue(e):t}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e,t){return le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},le(e,t)}function ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pe=function(e){function t(){var e,r;oe(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=se(this,(e=ie(t)).call.apply(e,[this].concat(o))),ce(ue(r),"state",{manualEntry:!1,loadingResults:!1,manualInitialValues:{}}),ce(ue(r),"handleBookFormSubmit",(function(){return r.bookAddForm.submit()})),ce(ue(r),"handleBookSubmitted",(function(e){r.hasIncompleteFields(e)?r.switchToManualEntry(e):r.props.dispatch(k(e))})),ce(ue(r),"hasIncompleteFields",(function(e){var t=e.ISBN,r=void 0===t?"":t,n=e.author,o=void 0===n?"":n,a=e.title,s=void 0===a?"":a;return Boolean(!r.trim()||!o.trim()||!s.trim())})),ce(ue(r),"switchToManualEntry",(function(e){r.setState({manualEntry:!0,manualInitialValues:e})})),ce(ue(r),"handleManualEntryClick",(function(){return r.setState((function(e){return{manualEntry:!e.manualEntry,manualInitialValues:{}}}))})),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(t,e),r=t,n=[{key:"componentDidUpdate",value:function(e){this.props.submitBookStatus!==e.submitBookStatus&&(this.props.submitBookStatus===v.a.ADD_BOOK_NOT_SUBMITTED&&"function"==typeof this.props.onError?this.props.onError():this.props.submitBookStatus===v.a.ADD_BOOK_SUBMITTED&&"function"==typeof this.props.onBookAdded&&this.props.onBookAdded(this.props.addedBook))}},{key:"render",value:function(){var e=this,t=null;return t=this.state.manualEntry?o.a.createElement(f.a,{show:this.props.show,onHide:this.props.onHidden,dialogClassName:"book-modal","data-test-selector":"addBookModal"},o.a.createElement(f.a.Header,null,o.a.createElement("div",{className:"modal__title"},s.a.get("add_book_title")),o.a.createElement(f.a.Dismiss,{className:"modal__cross"},o.a.createElement(re.a,{icon:"times"}))),o.a.createElement(f.a.Body,null,o.a.createElement(te,{ref:function(t){e.bookAddForm=t},initialValues:this.state.manualInitialValues,onSubmit:this.handleBookSubmitted})),o.a.createElement(f.a.Footer,null,o.a.createElement(x.d,null,o.a.createElement(x.c,{color:"lighter",type:"button",onClick:this.handleManualEntryClick,disabled:this.state.loadingResults},s.a.get("back_to_search")),o.a.createElement(x.e,{type:"button",disabled:this.state.loadingResults,loading:this.state.loadingResults,onClick:this.handleBookFormSubmit,"data-test-selector":"submitNewBook"},s.a.get("add_book_title"))))):o.a.createElement(f.a,{show:this.props.show,onHide:this.props.onHidden,dialogClassName:"book-modal","data-test-selector":"addBookModal"},o.a.createElement(f.a.Header,null,o.a.createElement("div",{className:"modal__title"},s.a.get("add_book_title")),o.a.createElement("button",{className:"modal__cross",onClick:this.props.onHidden},o.a.createElement(re.a,{icon:"times"}))),o.a.createElement(f.a.Body,null,o.a.createElement(z,{onResultSelected:this.handleBookSubmitted})),o.a.createElement(f.a.Footer,null,o.a.createElement("div",{className:"text-center book-add"},o.a.createElement(x.c,{size:"minimum",color:"link",className:"font-size-small",onClick:this.handleManualEntryClick,"data-test-selector":"bookManualAddBtn"},s.a.get("or_add_manually"))))),t}}],a=[{key:"getDerivedStateFromProps",value:function(e){switch(e.submitBookStatus){case v.a.ADD_BOOK_SUBMITTING:return{loadingResults:!0};case v.a.ADD_BOOK_SUBMITTED:case v.a.ADD_BOOK_NOT_SUBMITTED:return{loadingResults:!1};default:return null}}}],n&&ae(r.prototype,n),a&&ae(r,a),t}(n.Component);ce(pe,"propTypes",{onBookAdded:u.a.func.isRequired,show:u.a.bool.isRequired,onHidden:u.a.func.isRequired,onError:u.a.func,courseId:u.a.number,submitBookStatus:u.a.string,addedBook:u.a.object,dispatch:u.a.func});var de=Object(p.connect)((function(e){return{submitBookStatus:e.course.submitBookStatus,addedBook:e.course.addedBook}}))(pe);function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function he(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function be(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?ge(e):t}function ye(e){return ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ye(e)}function ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Se(e,t){return Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Se(e,t)}function Oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ve=function(e){function t(){var e,r;he(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=be(this,(e=ye(t)).call.apply(e,[this].concat(o))),Oe(ge(r),"state",{showModal:!1}),Oe(ge(r),"handleClick",(function(e){e.preventDefault(),r.setState({showModal:!0})})),Oe(ge(r),"handleModalHidden",(function(){return r.setState({showModal:!1})})),Oe(ge(r),"handleBookAdded",(function(e){return r.setState({showModal:!1},(function(){return r.props.onSubmitted(e)}))})),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(t,e),r=t,n=[{key:"render",value:function(){return o.a.createElement("div",{className:c.a.buttonWrapper},o.a.createElement(de,{show:this.state.showModal,onHidden:this.handleModalHidden,onBookAdded:this.handleBookAdded,courseId:this.props.courseId}),o.a.createElement(x.c,{size:"wide",color:"clear",className:c.a.button,onClick:this.handleClick,"data-test-selector":"addBookButton"},o.a.createElement(re.a,{icon:"question-circle"})," ",s.a.get("add_book")))}}],n&&me(r.prototype,n),a&&me(r,a),t}(n.Component);Oe(ve,"propTypes",{courseId:u.a.number,onSubmitted:u.a.func.isRequired});t.default=ve},s0Ty:function(e,t,r){e.exports={"button-wrapper":"button-wrapper--3kOJ1",buttonWrapper:"button-wrapper--3kOJ1",button:"button--kDsWF"}}}]);